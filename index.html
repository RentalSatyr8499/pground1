<!DOCTYPE html>
<html>
<head>
    <style>
        canvas {
            border: 1px solid black;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        #level1 {
            visibility: hidden;
        }
    </style>
</head>
<body>
    <canvas id="myCanvas" width="500" height="500"></canvas>
    <script id="startMenu" src="start menu.js"></script>
    <script>
        async function loadScript(url, scriptID) {
            return new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.src = url;
                script.id = scriptID;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        async function switchScript(oldID, newID, newScriptURL) {
            // remove old scene
            document.getElementById(oldID).remove();

            // clear canvas
            var canvas = document.getElementById("myCanvas");
            const context = canvas.getContext("2d");
            context.globalCompositeOperation = "destination-out";
            context.fillStyle = "white";
            context.fillRect(0, 0, canvas.width, canvas.height);
            context.globalCompositeOperation = "source-over";
            const clonedCanvas = canvas.cloneNode(true); // remove event listners
            canvas.parentNode.replaceChild(clonedCanvas, canvas);
            console.log("canvas cleared!");

            // load new scene
            try {
                await loadScript(newScriptURL, newID);
            } catch (error) {
                console.error("Error loading special.js:", error);
            }
        }
    </script>    
    
</body>
</html>
